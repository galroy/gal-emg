/*
 * clock.c
 *
 *  Created on: Jun 21, 2022
 *      Author: student
 */
#include "clock.h"

void clockInit(CLOCK *clk,TIM_HandleTypeDef *htim){
	if(clk == NULL){
		return;
	}
	clk->sysTime.hour = 0;
	clk->sysTime.minute = 0;
	clk->sysTime.second = 0;
	clk->sysTime.milliSecond = 0;
	clk->htim = htim;
}
void clockOnInterrupt(CLOCK *clk,TIM_HandleTypeDef *htim){
	if(clk == NULL){
		return;
	}
	if(htim != clk->htim){
		return;
	}
	clk->sysTime.milliSecond++;
	if((clk->sysTime.milliSecond % 1000) == 0){
		clk->sysTime.second++;
	}
	if((clk->sysTime.second % 60) == 0){
		clk->sysTime.minute++;
		clk->sysTime.second = 1;
	}
	if((clk->sysTime.minute % 60) == 0){
		clk->sysTime.hour++;
		clk->sysTime.minute = 1;
	}
}

uint32_t clockGetMilliSecond(CLOCK *clk){
	return clk->sysTime.milliSecond;
}
uint16_t clockGetSecond(CLOCK *clk){
	return clk->sysTime.second;
}
uint16_t clockGetMinute(CLOCK *clk){
	return clk->sysTime.minute;
}
uint16_t clockGetHour(CLOCK *clk){
	return clk->sysTime.hour;
}

